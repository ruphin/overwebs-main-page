{"version":3,"names":[],"mappings":"","sources":["overwebs-main-page.js"],"sourcesContent":["import { GluonElement, html } from '../gluonjs/gluon.js';\nimport '../overwebs-player-widget/overwebs-player-widget.js';\nimport '../overwebs-player-data/overwebs-player-data.js';\nimport '../overwebs-main-menu/overwebs-main-menu.js';\nimport '../overwebs-fonts/overwebs-fonts.js';\n\nexport class OverwebsMainPage extends GluonElement {\n  get template() {\n    return html`\n    <style>\n      :host {\n        display: block;\n        position: relative;\n        width: 100%;\n        min-height: 100%;\n        box-sizing: border-box;\n        padding-top: calc(270 / 2560 * var(--overwebs-window-size, 1920px));\n      }\n\n      overwebs-player-widget {\n        position: absolute;\n        top: calc(40 / 2560 * var(--overwebs-window-size, 1920px));\n        right: calc(68 / 2560 * var(--overwebs-window-size, 1920px));\n      }\n\n      .searching-spinner {\n        margin-left: calc(40 / 2560 * var(--overwebs-window-size, 1920px));\n        height: calc(80 / 2560 * var(--overwebs-window-size, 1920px));\n        width: calc(80 / 2560 * var(--overwebs-window-size, 1920px));\n      }\n\n      .hero {\n        opacity: .9;\n        position: absolute;\n        right: calc(5 / 2560 * var(--overwebs-window-size, 1920px));\n        top: calc(760 / 2560 * var(--overwebs-window-size, 1920px));\n        text-align: right;\n        z-index: 3;\n      }\n\n      @media (max-width: 660px) {\n        .hero {\n          top: calc(960 / 2560 * var(--overwebs-window-size, 1920px));\n        }\n      }\n\n      .hero .name,\n      .hero .nameShadow,\n      .hero .nameShadow2 {\n        padding-right: calc(76 / 2560 * var(--overwebs-window-size, 1920px));\n        font-family: overwebs-big-noodle;\n        line-height: 1;\n        font-size: calc(114 / 2560 * var(--overwebs-window-size, 1920px));\n        color: transparent;\n      }\n\n      .hero .nameShadow,\n      .hero .nameShadow2 {\n        color: #fff;\n        position: absolute;\n        right: 0;\n        top: 0;\n      }\n\n      .hero .name {\n        background: linear-gradient(#fff 0, #fff 50%, #fff 50%, #BDBFC0);\n        -webkit-background-clip: text;\n      }\n\n      .hero .nameShadow {\n        z-index: -1;\n        -webkit-text-stroke: calc(3 / 2560 * var(--overwebs-window-size, 1920px)) rgba(0, 0, 0, .15);\n      }\n\n      .hero .nameShadow2 {\n        z-index: -2;\n        background: linear-gradient(transparent, transparent 10%, rgba(219, 155, 143, .85) 16%, rgba(0, 0, 0, .15));\n        -webkit-background-clip: text;\n        -webkit-text-stroke: calc(4 / 2560 * var(--overwebs-window-size, 1920px)) transparent;\n      }\n\n      .hero .unlocks,\n      .hero .unlocksShadow {\n        font-family: overwebs-futura;\n        font-size: calc(36 / 2560 * var(--overwebs-window-size, 1920px));\n        text-transform: uppercase;\n        padding-right: calc(70 / 2560 * var(--overwebs-window-size, 1920px));\n      }\n\n      .hero .unlocks {\n        color: rgba(255, 255, 255, .8);\n        margin-top: calc(2 / 2560 * var(--overwebs-window-size, 1920px));\n      }\n\n      .hero .unlocks .unlocked {\n        color: #fff;\n      }\n\n      .hero .unlocksShadow {\n        color: transparent;\n        position: absolute;\n        right: 0;\n        bottom: 0;\n        z-index: -1;\n        -webkit-text-stroke: calc(4.5 / 2560 * var(--overwebs-window-size, 1920px)) rgba(0, 0, 0, .15);\n      }\n    </style>\n    <overwebs-hero-data id=\"heroData\"></overwebs-hero-data>\n    <overwebs-player-data id=\"playerData\"></overwebs-player-data>\n    <overwebs-player-widget id=\"playerWidget\"></overwebs-player-widget>\n    <overwebs-main-menu>\n      <a href=\"/play\">Play</a>\n      <a href=\"/training\">Training</a>\n      <a href=\"/hero-gallery\">Hero Gallery</a>\n      <a href=\"/loot\">Loot Box</a>\n    </overwebs-main-menu>\n    <overwebs-main-menu submenu>\n      <a href=\"/social\">Social</a>\n      <a href=\"/career\">Career Profile</a>\n      <a href=\"/options\">Options</a>\n      <a href=\"/exit\">Exit Game</a>\n    </overwebs-main-menu>\n    <div class=\"hero\">\n      <div class=\"name\">${this._hero}</div>\n      <div class=\"nameShadow\">${this._hero}</div>\n      <div class=\"nameShadow2\">${this._hero}</div>\n      <div class=\"unlocks\"><span class=\"unlocked\">${this._unlocked}</span>/${this._unlockable} unlocks</div>\n      <div class=\"unlocksShadow\">${this._unlocked}/${this._unlockable} unlocks</div>\n    </div>\n    `;\n  }\n\n  constructor() {\n    super();\n    this._hero = '';\n    this._unlocked = 0;\n    this._unlockable = 0;\n  }\n\n  connectedCallback() {\n    super.connectedCallback();\n    this.$.heroData.addEventListener('data-changed', () => {\n      this.heroData = this.$.heroData.data;\n      this._heroChanged();\n    });\n    this.$.playerData.addEventListener('player-changed', () => {\n      this.$.playerWidget.player = this.$.playerData.player;\n      this.playerData = this.$.playerData.player;\n      this._heroChanged();\n    });\n  }\n\n  set backgroundSelection(backgroundSelection) {\n    this._backgroundSelection = backgroundSelection;\n    this._heroChanged();\n  }\n\n  get backgroundSelection() {\n    return this._backgroundSelection;\n  }\n\n  _heroChanged() {\n    if (this.heroData === undefined || this.playerData === undefined || this.backgroundSelection === undefined) {\n      return;\n    }\n    let hero = this.backgroundSelection\n      .split('/')\n      .slice(0, -1)\n      .pop();\n    this._hero = (this.heroData[hero] && this.heroData[hero].name) || '';\n\n    if (this.playerData.unlocks && this.heroData[hero]) {\n      this._unlocked = Math.min(this.playerData.unlocks[hero], this.heroData[hero].unlockable);\n    } else {\n      this._unlocked = 0;\n    }\n\n    this._unlockable = (this.heroData[hero] && this.heroData[hero].unlockable) || 0;\n    this.render();\n  }\n}\n\ncustomElements.define(OverwebsMainPage.is, OverwebsMainPage);\n"],"file":"overwebs-main-page.js"}